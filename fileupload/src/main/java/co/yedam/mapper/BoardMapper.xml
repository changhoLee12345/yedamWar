<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="co.yedam.mapper.BoardMapper">

	<select id="selectListPaging" resultType="Board" parameterType="search">
		select board_no
		      ,title
		      ,content
		      ,writer
		      ,view_cnt
		      ,create_date
		      ,update_date
		from (select /*+ INDEX(b board_pk)*/
		      rownum rn, b.* 
		      from tbl_board b
		      <where>
		        <if test="writer != null">
		          writer = #{writer}
		        </if>
		          and   title like '%'||#{title}||'%'
                <![CDATA[
			      and   rownum <= #{page} * 5
			    ]]>
		      </where>
		      ) a
		where rn > (#{page} - 1) * 5	
	</select>

</mapper>